import{c as N,E as W,_ as E,d as j}from"./convertFieldResponseIntoMuiTextFieldProps-18d49940.js";import{a as z,g as X,s as v,M as q,H as B,r as s,N as T,a7 as G,a8 as Y,a9 as $,m as L,h as k,e as J,p as Q,q as w}from"./index-c0aa72f3.js";import{a as V}from"./useDefaultReduceAnimations-759800f6.js";function Z(t){return z("MuiPickersPopper",t)}X("MuiPickersPopper",["root","paper"]);const ee=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],te=t=>{const{classes:o}=t;return J({root:["root"],paper:["paper"]},Z,o)},ne=v(q,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,o)=>o.root})(({theme:t})=>({zIndex:t.zIndex.modal})),re=v(B,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,o)=>o.paper})({outline:0,transformOrigin:"top center",variants:[{props:({placement:t})=>["top","top-start","top-end"].includes(t),style:{transformOrigin:"bottom center"}}]});function oe(t,o){return o.documentElement.clientWidth<t.clientX||o.documentElement.clientHeight<t.clientY}function se(t,o){const p=s.useRef(!1),f=s.useRef(!1),c=s.useRef(null),l=s.useRef(!1);s.useEffect(()=>{if(!t)return;function e(){l.current=!0}return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0),()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0),l.current=!1}},[t]);const u=Q(e=>{if(!l.current)return;const a=f.current;f.current=!1;const h=w(c.current);if(!c.current||"clientX"in e&&oe(e,h))return;if(p.current){p.current=!1;return}let r;e.composedPath?r=e.composedPath().indexOf(c.current)>-1:r=!h.documentElement.contains(e.target)||c.current.contains(e.target),!r&&!a&&o(e)}),d=()=>{f.current=!0};return s.useEffect(()=>{if(t){const e=w(c.current),a=()=>{p.current=!0};return e.addEventListener("touchstart",u),e.addEventListener("touchmove",a),()=>{e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",a)}}},[t,u]),s.useEffect(()=>{if(t){const e=w(c.current);return e.addEventListener("click",u),()=>{e.removeEventListener("click",u),f.current=!1}}},[t,u]),[c,d,d]}const ce=s.forwardRef((t,o)=>{const{PaperComponent:p,popperPlacement:f,ownerState:c,children:l,paperSlotProps:u,paperClasses:d,onPaperClick:e,onPaperTouchStart:a}=t,h=j(t,ee),r=E({},c,{placement:f}),n=L({elementType:p,externalSlotProps:u,additionalProps:{tabIndex:-1,elevation:8,ref:o},className:d,ownerState:r});return k(p,E({},h,n,{onClick:m=>{var i;e(m),(i=n.onClick)==null||i.call(n,m)},onTouchStart:m=>{var i;a(m),(i=n.onTouchStart)==null||i.call(n,m)},ownerState:r,children:l}))});function pe(t){const o=N({props:t,name:"MuiPickersPopper"}),{anchorEl:p,children:f,containerRef:c=null,shouldRestoreFocus:l,onBlur:u,onDismiss:d,open:e,role:a,placement:h,slots:r,slotProps:n,reduceAnimations:m}=o;s.useEffect(()=>{function P(R){e&&R.key==="Escape"&&d()}return document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P)}},[d,e]);const i=s.useRef(null);s.useEffect(()=>{a==="tooltip"||l&&!l()||(e?i.current=W(document):i.current&&i.current instanceof HTMLElement&&setTimeout(()=>{i.current instanceof HTMLElement&&i.current.focus()}))},[e,a,l]);const[M,g,x]=se(e,u??d),A=s.useRef(null),F=T(A,c),b=T(F,M),S=o,y=te(S),D=V(),_=m??D,O=P=>{P.key==="Escape"&&(P.stopPropagation(),d())},H=(r==null?void 0:r.desktopTransition)??_?G:Y,U=(r==null?void 0:r.desktopTrapFocus)??$,I=(r==null?void 0:r.desktopPaper)??re,C=(r==null?void 0:r.popper)??ne,K=L({elementType:C,externalSlotProps:n==null?void 0:n.popper,additionalProps:{transition:!0,role:a,open:e,anchorEl:p,placement:h,onKeyDown:O},className:y.root,ownerState:o});return k(C,E({},K,{children:({TransitionProps:P,placement:R})=>k(U,E({open:e,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:a==="tooltip",isEnabled:()=>!0},n==null?void 0:n.desktopTrapFocus,{children:k(H,E({},P,n==null?void 0:n.desktopTransition,{children:k(ce,{PaperComponent:I,ownerState:S,popperPlacement:R,ref:b,onPaperClick:g,onPaperTouchStart:x,paperClasses:y.paper,paperSlotProps:n==null?void 0:n.desktopPaper,children:f})}))}))}))}export{pe as P};
